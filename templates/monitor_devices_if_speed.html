{% extends 'base.html' %}
{% block title %}
    乾頤堂监控设备
{% endblock title %}

{% block js %}
    <!-- 加载Chart.js的JS文件 -->
    <!-- 最新的Chart JS 文件 https://cdnjs.com/libraries/Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
    <!-- 加载本项目创建的chart_json_functions.js的JS文件-->
    {% load static %}
    <script src="{% static "js/chart_functions.js" %}"></script>
    <!-- 加载ajax的JS文件-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
{% endblock js %}

{% block body %}

<div class="container-fluid">
<div class="card text-center">
  <div class="card-header">
    <ul class="nav nav-tabs card-header-tabs">
      {% for device in devices_list %}
          {% if device == current %}
          <li class="nav-item">
            <a class="nav-link active" href="/monitordevice/if_speed/{{ device }}/">{{ device }}</a>
          </li>
          {% else %}
          <li class="nav-item">
            <a class="nav-link" href="/monitordevice/if_speed/{{ device }}/">{{ device }}</a>
          </li>
          {% endif %}
      {% endfor %}
    </ul>
  </div>
  <div class="card-body">
      {% for ifname in if_list %}
      <div class='row'>
          <div class='col col-md-2'>
          </div>
          <div class='col col-md-8'>
            <canvas id=rx_{{ ifname }}></canvas>
          </div>
          <div class='col col-md-2'>
          </div>
      </div>
      {% endfor %}
      {% for ifname in if_list %}
      <div class='row'>
          <div class='col col-md-2'>
          </div>
          <div class='col col-md-8'>
            <canvas id=tx_{{ ifname }}></canvas>
          </div>
          <div class='col col-md-2'>
          </div>
      </div>
      {% endfor %}

  </div>
</div>
</div>
<script type="text/javascript" language="javascript">
    let array_rx = {{ speed_rx_data_list|safe }};
    for (let i in array_rx) {
        chart_line('rx_'+ array_rx[i][0], array_rx[i][0]+' 入向速率(单位kbps)', array_rx[i][2], array_rx[i][1], ['#007bff', '#28a745', '#333333', '#c3e6cb', '#dc3545', '#6c757d']);
    }

    let array_tx = {{ speed_tx_data_list|safe }};
    for (let i in array_tx) {
        chart_line('tx_'+ array_tx[i][0], array_tx[i][0]+' 出向速率(单位kbps)', array_tx[i][2], array_tx[i][1], ['#007bff', '#28a745', '#333333', '#c3e6cb', '#dc3545', '#6c757d']);
    }

</script>

{% endblock body %}
